
CREATE DATABASE MATRICULA;
GO

USE MATRICULA;
GO



CREATE TABLE PROGRAMA
( 
	CODPROG              integer  NOT NULL ,
	NOMBPROG             varchar(150)  NOT NULL ,
	CONSTRAINT XPKPROGRAMA PRIMARY KEY (CODPROG ASC)
)
go



CREATE TABLE ALUMNO
( 
	CODALU               integer  NOT NULL ,
	NOMBALU              varchar(100)  NOT NULL ,
	CONSTRAINT XPKALUMNO PRIMARY KEY (CODALU ASC)
)
go



CREATE TABLE MATRICULA
( 
	NROMAT               integer  NOT NULL ,
	CODPROG              integer  NOT NULL ,
	CODALU               integer  NOT NULL ,
	FECMAT               datetime  NOT NULL ,
	FECINICIO            datetime  NOT NULL ,
	TIPOALU              varchar(20)  NOT NULL ,
	OBS                  varchar(100)  NULL ,
	CONSTRAINT XPKMATRICULA PRIMARY KEY (NROMAT ASC),
	CONSTRAINT FK_MATRICULA_PROGRAMA FOREIGN KEY (CODPROG) REFERENCES PROGRAMA(CODPROG)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_MATRICULA_ALUMNO FOREIGN KEY (CODALU) REFERENCES ALUMNO(CODALU)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go



CREATE TABLE CURSO
( 
	CODCURSO             integer  NOT NULL ,
	NOMBCURSO            varchar(100)  NOT NULL ,
	CONSTRAINT XPKCURSO PRIMARY KEY (CODCURSO ASC)
)
go



CREATE TABLE PROFESOR
( 
	CODPROFESOR          integer  NOT NULL ,
	NOMBPROFESOR         varchar(100)  NOT NULL ,
	CONSTRAINT XPKPROFESOR PRIMARY KEY (CODPROFESOR ASC)
)
go



CREATE TABLE DETALLE_MATRICULA
( 
	NROMAT               integer  NOT NULL ,
	NROMES               integer  NOT NULL ,
	CODCURSO             integer  NOT NULL ,
	CODPROFESOR          integer  NOT NULL ,
	CONSTRAINT XPKDETALLE_MATRICULA PRIMARY KEY (NROMAT ASC,NROMES ASC),
	CONSTRAINT FK_DETALLE_MATRICULA_MATRICULA FOREIGN KEY (NROMAT) REFERENCES MATRICULA(NROMAT)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_DETALLE_MATRICULA_CURSO FOREIGN KEY (CODCURSO) REFERENCES CURSO(CODCURSO)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION,
CONSTRAINT FK_DETALLE_MATRICULA_PROFESOR FOREIGN KEY (CODPROFESOR) REFERENCES PROFESOR(CODPROFESOR)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
)
go


